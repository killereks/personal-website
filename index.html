<!DOCTYPE html>
<html>

<head>
	<title>Oskar's Projects</title>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/icon.min.css" type="text/css">
	<link rel="stylesheet" href="css/semantic.css" type="text/css">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.10.1/devicon.min.css">
</head>

<style>

	* {
		font-family: "Inter", sans-serif;
	}

	.project-parent {
		margin: 1rem;
		display: flex;
		overflow: hidden;0
		flex-direction: row;
		flex-basis: 100%;
	}
	
	.project-list {
		justify-content: center;
		align-items: center;
		gap: 1rem;
		flex: 1;
		display: flex;
		min-height: min-content;
	}
	
	.project {
		width: 200px;
		height: 300px;
		background-color: #eaeaea;
		/* clip image so it doesn't go outside the container and center it*/
		overflow: hidden;
		display: flex;
		align-items: center;
		justify-content: center;
		transition: 0.2s;
		position: relative;
		cursor: pointer;
	}

	.project .title {
		position: absolute;
		bottom: 0;
		transition: 0.2s;
		z-index: 99 !important;
		width: 100%;
		height: 50px;
		font-size: 1.5rem;
		display: flex;
		align-items: center;
		justify-content: center;
		color: #eaeaea;
		letter-spacing: 0.1rem;
		background-color: rgba(0, 0, 0, 0.5);
		padding: 0.5rem;
	}

	.project .winner {
		position: absolute;
		top: 0;
		width: 100%;
		transition: 0.2s;
		z-index: 99 !important;
		height: 50px;
		font-size: 1.5rem;
		display: flex;
		align-items: center;
		justify-content: center;
		/* winner color, glowing yellow */
		color: #f9f871;
		letter-spacing: 0.1rem;
		background-color: rgba(0, 0, 0, 0.5);
		padding: 0.5rem;
	}

	.project img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: 0.2s;
	}

	/* .project:hover {
		width: 225px;
		height: 325px;
	} */

	.project:hover img {
		transform: scale(1.4);
	}

	.top-project-bar {
		display: flex;
		flex-direction: row;
		justify-content: center;
		align-items: center;
	}

	#project-name {
		font-size: 2rem;
		margin: 0;
	}

	#project-description {
		margin: 0;
		background-color: #ddd;
		padding: 1rem;
	}

	/* should look like a button with an arrow animation */
	.custom-link {
		color: #eaeaea;
		text-decoration: none;
		font-size: 1.5rem;
		transition: 0.2s;
		background-color: #3498db;
		padding: 1rem;
		border-radius: 0.5rem;
	}

	.custom-link:hover {
		background-color: #2980b9;
		color: #eaeaea;
	}

	.nav-button {
		width: 100px;
		background-color: #333;
		color: #eaeaea;
	}

	#project-count {
		font-size: 1.5rem;
		font-weight: 300;
	}

	/* import local font at ./fonts/Esteban-Regular.ttf */
	@font-face {
		font-family: "Bitter";
		src: url("fonts/Bitter.ttf");
	}

	.header {
		font-family: "Bitter", Helvetica, Arial, sans-serif;
		margin: 1rem;
		padding: 1rem;
	}
	
	.page {
		width: 100%;
		height: 100%;
		background-color: #eaeaea;
	}

	#page1 {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}

	/* break text up into small width chunks*/
	.bio {
		font-size: 1.5rem;
		line-height: 1.5;
		letter-spacing: 0.1rem;
		width: 50%;
		background-color: #ccc;
		padding: 1rem;
		border-radius: 0.5rem;
	}

	.caret {
		font-size: 2rem;

		/* animation */
		animation: caret 1s infinite;
	}

	#job-title {
		display: inline-block;
	}

	@keyframes caret {
		0% {
			opacity: 0;
		}
		50% {
			opacity: 1;
		}
		100% {
			opacity: 0;
		}
	}

</style>

<body>
	<div class="page" id="page1">
		<div class="header" style="font-size: 4rem;">
			Oskar Oramus
		</div>
		<div class="header">
			<div id="job-title" style="font-size: 2rem;"></div>
			<span class="caret">|</span>
		</div>
		<p class="bio">
			Hi! I'm a bilingual Computer Science student who loves making games and programming. <br>
			I've been programming for <b id="programming-time"></b> and have been using Unity Engine for <b id="unity-time"></b></p>

		<button class="ui massive button blue" onclick="toggleBio(false);">See my projects <i class="icon right arrow"></i></button>
	</div>
	<div class="page" id="page2">
		<div class="ui basic segment">	
			<button class="ui button blue" onclick="toggleBio(true);"><i class="icon left arrow"></i> Back to bio</button>
			<div class="ui basic segment">
				<div class="top-project-bar">
					<div class="project nav-button" onclick="prev()"><i class="ui big icon arrow left"></i></div>
					<div class="project-parent">
						<div class="project-list"></div>
					</div>
					<div class="project nav-button" onclick="next()"><i class="ui big icon arrow right"></i></div>
				</div>
				<div id="project-count"></div>
			</div>
	
			<div class="ui basic segment" id="project-info-display">
				<!-- Project Display -->
				<div class="ui stackable two column grid">
					<div class="eight wide column">
						<!-- stretch image to fit -->
						<img id="project-image" src="" style="width: 100%; height: 100%; object-fit: cover;">
						<!-- youtube video embed -->
						<iframe id="project-video" width="100%" height="100%" src="" frameborder="0" allowfullscreen></iframe>
					</div>
					<div class="eight wide column">
						<h1 id="project-name">Project Name</h1>
						<div class="ui horizontal divider"></div>
						<p id="project-description">Project Description</p>
						<div class="ui horizontal divider"></div>
						<div id="project-features" class="ui divided list"></div>
						<div class="ui horizontal divider"></div>
						<div id="project-tags"></div>
						<div class="ui horizontal divider"></div>
						<div id="project-link"></div>
					</div>
			</div>
	
		</div>
	</div>

</body>

</html>

<script src="scripts/jquery.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="scripts/date.js"></script>
<script src="scripts/projectInfo.js"></script>
<script src="scripts/cardHover.js"></script>


<script>
	// sort based on if project has a winner property
	info.sort((a,b) => {
		var aWinner = a.hasOwnProperty("winner");
		var bWinner = b.hasOwnProperty("winner");

		if (aWinner && !bWinner) {
			return -1;
		} else if (!aWinner && bWinner) {
			return 1;
		} else {
			return 0;
		}
	})

	$('#project-info-display').hide();

	$('#project-count').html(`Showing ${info.length} projects`);
	for (var i = 0; i < info.length; i++) {
		var project = info[i];

		// has own property
		var isWinner = project.hasOwnProperty('winner');

		$(".project-list").append(`
			<div class="project" onclick="displayProject(${i})">
				<img src="${project.image}" alt="">
				<div class="title">${project.name}</div>
				${isWinner ? '<div class="winner">'+project.winner+'</div>' : ''}
			</div>
		`);
	}

	const offsetAmount = 800;

	function prev(){
		var currentMargin = parseInt($(".project-list").css("margin-left"));
		var targetMargin = currentMargin + offsetAmount;
		if (targetMargin > 0){
			targetMargin = 0;
		}
		$(".project-list").animate({
			marginLeft: targetMargin
		}, 200);
	}
	function next(){
		// increase margin, unless we are at the end of projects
		var currentMargin = parseInt($(".project-list").css("margin-left"));
		var maxMargin = $(".project-parent").width() - $(".project-list").width();
		
		var targetMargin = currentMargin - offsetAmount;
		if (targetMargin < maxMargin){
			targetMargin = maxMargin;
		}

		$(".project-list").animate({
			marginLeft: targetMargin
		}, 200);

	}

	function displayProject(index){
		selectedIndex = index;
		var project = info[index];
		
		var hasVideo = project.hasOwnProperty("video");

		// hide image if video exists
		if (hasVideo){
			$("#project-image").hide();
			$("#project-video").show();

			$("#project-video").attr("src", project.video);
		} else {
			$("#project-image").show();
			$("#project-video").hide();
		}

		// display project info
		$("#project-name").html(project.name);
		$("#project-description").html(project.description);
		$('#project-image').attr('src', project.image);
		$("#project-link").html(project.link);
		
		var tagsHTML = "";
		for (var i = 0; i < project.tags.length; i++){
			var tag = project.tags[i];
			tagsHTML += `<div class="ui big basic purple label">${tag}</div>`;
		}
		$("#project-tags").html(tagsHTML);

		var featuresHTML = "";
		for (var i = 0; i < project.features.length; i++){
			var feature = project.features[i];
			featuresHTML += `<div class="item"><i class="ui icon check" style="color: #4caf50;"></i> ${feature}</div>`;
		}

		$("#project-features").html(featuresHTML);

		$('#project-info-display').show();
	}

	function toggleBio(state){
		if (state){
			$('#page1').show(300);
			$('#page2').hide(300);
		} else {
			$('#page1').hide(300);
			$('#page2').show(300);
		}
	}
	
	toggleBio(true);

	function animateJobTitles(){
		var titles = ["Software Engineer", "Mathematician", "Student"];
		var index = 0;
		// animate each letter until full title is displayed
		// then remove each letter until title is empty
		// wait 1 second, then repeat
		// show caret at end of title

		var direction = 1;
		var title = "";
		var titleElement = $("#job-title");

		var delay = 0;
		
		var interval = setInterval(function(){
			if (delay > 0){
				delay -= 100;
				return;
			}

			if (direction == 1){
				title += titles[index][title.length];
				titleElement.html(title);
				if (title.length == titles[index].length){
					direction = -1;
					delay = 1000;
				}
			} else {
				title = title.substring(0, title.length - 1);
				titleElement.html(title);
				if (title.length == 0){
					direction = 1;
					index++;
					if (index == titles.length){
						index = 0;
					}
				}
			}
		}, 100);
	}
	animateJobTitles();
</script>